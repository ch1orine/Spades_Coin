(function (){
    // é˜²æ­¢ä½¿ç”¨ç¼–è¾‘å™¨è‡ªå¸¦çš„packageæŠ¥é”™
    const Path = require('path')
    module.paths.push(Path.join(Editor.App.path,'node_modules'));
})();
(()=>{var __webpack_modules__={9669:(e,t,n)=>{e.exports=n(1609)},7970:(e,t,n)=>{"use strict";var r=n(4867),s=n(6026),i=n(4097),o=n(5327),a=n(3685),c=n(5687),u=n(938).http,l=n(938).https,h=n(7310),d=n(9796),f=n(7288).version,p=n(5061),_=n(481),m=n(7874),g=n(5263),v=/https:?/;function y(e,t,n){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=n,t.auth){var r=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+r}e.beforeRedirect=function(e){e.headers.host=e.host,y(e,t,e.href)}}e.exports=function(e){return new Promise((function(t,n){var b;function E(){e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b)}var w=function(e){E(),t(e)},k=!1,P=function(e){E(),k=!0,n(e)},x=e.data,S=e.headers,O={};if(Object.keys(S).forEach((function(e){O[e.toLowerCase()]=e})),"user-agent"in O?S[O["user-agent"]]||delete S[O["user-agent"]]:S["User-Agent"]="axios/"+f,x&&!r.isStream(x)){if(Buffer.isBuffer(x));else if(r.isArrayBuffer(x))x=Buffer.from(new Uint8Array(x));else{if(!r.isString(x))return P(p("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));x=Buffer.from(x,"utf-8")}if(e.maxBodyLength>-1&&x.length>e.maxBodyLength)return P(p("Request body larger than maxBodyLength limit",e));O["content-length"]||(S["Content-Length"]=x.length)}var T=void 0;e.auth&&(T=(e.auth.username||"")+":"+(e.auth.password||""));var C=i(e.baseURL,e.url),M=h.parse(C),D=M.protocol||"http:";if(!T&&M.auth){var R=M.auth.split(":");T=(R[0]||"")+":"+(R[1]||"")}T&&O.authorization&&delete S[O.authorization];var L=v.test(D),U=L?e.httpsAgent:e.httpAgent;try{o(M.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){var B=new Error(t.message);B.config=e,B.url=e.url,B.exists=!0,P(B)}var A={path:o(M.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:S,agent:U,agents:{http:e.httpAgent,https:e.httpsAgent},auth:T};e.socketPath?A.socketPath=e.socketPath:(A.hostname=M.hostname,A.port=M.port);var I,N=e.proxy;if(!N&&!1!==N){var j=D.slice(0,-1)+"_proxy",W={}[j]||{}[j.toUpperCase()];if(W){var V=h.parse(W),q={}.no_proxy||{}.NO_PROXY,$=!0;if(q)$=!q.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||("."===e[0]&&M.hostname.substr(M.hostname.length-e.length)===e||M.hostname===e))}));if($&&(N={host:V.hostname,port:V.port,protocol:V.protocol},V.auth)){var F=V.auth.split(":");N.auth={username:F[0],password:F[1]}}}}N&&(A.headers.host=M.hostname+(M.port?":"+M.port:""),y(A,N,D+"//"+M.hostname+(M.port?":"+M.port:"")+A.path));var K=L&&(!N||v.test(N.protocol));e.transport?I=e.transport:0===e.maxRedirects?I=K?c:a:(e.maxRedirects&&(A.maxRedirects=e.maxRedirects),I=K?l:u),e.maxBodyLength>-1&&(A.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(A.insecureHTTPParser=e.insecureHTTPParser);var z=I.request(A,(function(t){if(!z.aborted){var n=t,i=t.req||z;if(204!==t.statusCode&&"HEAD"!==i.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(d.createUnzip()),delete t.headers["content-encoding"]}var o={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:i};if("stream"===e.responseType)o.data=n,s(w,P,o);else{var a=[],c=0;n.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(k=!0,n.destroy(),P(p("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,i)))})),n.on("aborted",(function(){k||(n.destroy(),P(p("error request aborted",e,"ERR_REQUEST_ABORTED",i)))})),n.on("error",(function(t){z.aborted||P(_(t,e,null,i))})),n.on("end",(function(){try{var t=1===a.length?a[0]:Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=r.stripBOM(t))),o.data=t}catch(t){P(_(t,e,t.code,o.request,o))}s(w,P,o)}))}}}));if(z.on("error",(function(t){z.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||P(_(t,e,null,z))})),z.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var H=parseInt(e.timeout,10);if(isNaN(H))return void P(p("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",z));z.setTimeout(H,(function(){z.abort();var t="";t=e.timeoutErrorMessage?e.timeoutErrorMessage:"timeout of "+e.timeout+"ms exceeded";var n=e.transitional||m;P(p(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",z))}))}(e.cancelToken||e.signal)&&(b=function(e){z.aborted||(z.abort(),P(!e||e&&e.type?new g("canceled"):e))},e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b))),r.isStream(x)?x.on("error",(function(t){P(_(t,e,null,z))})).pipe(z):z.end(x)}))}},5448:(e,t,n)=>{"use strict";var r=n(4867),s=n(6026),i=n(4372),o=n(5327),a=n(4097),c=n(4109),u=n(7985),l=n(5061),h=n(7874),d=n(5263);e.exports=function(e){return new Promise((function(t,n){var f,p=e.data,_=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(f),e.signal&&e.signal.removeEventListener("abort",f)}r.isFormData(p)&&delete _["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";_.Authorization="Basic "+btoa(y+":"+b)}var E=a(e.baseURL,e.url);function w(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};s((function(e){t(e),g()}),(function(e){n(e),g()}),i),v=null}}if(v.open(e.method.toUpperCase(),o(E,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(w)},v.onabort=function(){v&&(n(l("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(l("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||h;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||u(E))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;k&&(_[e.xsrfHeaderName]=k)}"setRequestHeader"in v&&r.forEach(_,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete _[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(f=function(e){v&&(n(!e||e&&e.type?new d("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(f),e.signal&&(e.signal.aborted?f():e.signal.addEventListener("abort",f))),p||(p=null),v.send(p)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),s=n(1849),i=n(321),o=n(7185);var a=function e(t){var n=new i(t),a=s(i.prototype.request,n);return r.extend(a,i.prototype,n),r.extend(a,n),a.create=function(n){return e(o(t,n))},a}(n(5546));a.Axios=i,a.Cancel=n(5263),a.CancelToken=n(4972),a.isCancel=n(6502),a.VERSION=n(7288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(6268),e.exports=a,e.exports.default=a},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},s.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},s.source=function(){var e;return{token:new s((function(t){e=t})),cancel:e}},e.exports=s},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),s=n(5327),i=n(782),o=n(3572),a=n(7185),c=n(4875),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!s){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),i=Promise.resolve(t);h.length;)i=i.then(h.shift(),h.shift());return i}for(var d=t;r.length;){var f=r.shift(),p=r.shift();try{d=f(d)}catch(e){p(e);break}}try{i=o(d)}catch(e){return Promise.reject(e)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){return e=a(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},782:(e,t,n)=>{"use strict";var r=n(4867);function s(){this.handlers=[]}s.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=s},4097:(e,t,n)=>{"use strict";var r=n(1793),s=n(7303);e.exports=function(e,t){return e&&!r(t)?s(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,s,i){var o=new Error(e);return r(o,t,n,s,i)}},3572:(e,t,n)=>{"use strict";var r=n(4867),s=n(8527),i=n(6502),o=n(5546),a=n(5263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=s.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=s.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=s.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={};function s(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:s(void 0,e[n]):s(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return s(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:s(void 0,e[n]):s(void 0,t[n])}function c(n){return n in t?s(e[n],t[n]):n in e?s(void 0,e[n]):void 0}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,s=t(e);r.isUndefined(s)&&t!==c||(n[e]=s)})),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867),s=n(5546);e.exports=function(e,t,n){var i=this||s;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},5546:(e,t,n)=>{"use strict";var r=n(4867),s=n(6016),i=n(481),o=n(7874),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={transitional:o,adapter:("undefined"!=typeof XMLHttpRequest?u=n(5448):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(u=n(7970)),u),transformRequest:[function(e,t){return s(t,"Accept"),s(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||s&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l},7874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:e=>{e.exports={version:"0.26.1"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function s(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(s(t)+"="+s(e))})))})),i=o.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,s,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(s)&&a.push("path="+s),r.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function s(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=s(window.location.href),function(t){var n=r.isString(t)?s(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&s.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,n)=>{"use strict";var r=n(7288).version,s={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){s[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};s.transitional=function(e,t,n){return function(s,o,a){if(!1===e)throw new Error(function(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(o," has been removed"+(t?" in "+t:"")));return t&&!i[o]&&(i[o]=!0),!e||e(s,o,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),s=r.length;s-- >0;){var i=r[s],o=t[i];if(o){var a=e[i],c=void 0===a||o(a,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:s}},4867:(e,t,n)=>{"use strict";var r=n(1849),s=Object.prototype.toString;function i(e){return Array.isArray(e)}function o(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===s.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===s.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:i,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===s.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===s.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:h,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,s=arguments.length;r<s;r++)h(arguments[r],n);return t},extend:function(e,t,n){return h(t,(function(t,s){e[s]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",s="second",i="minute",o="hour",a="day",c="week",u="month",l="quarter",h="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,u),i=n-s<0,o=t.clone().add(r+(i?-1:1),u);return+(-(r+(n-s)/(i?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:c,d:a,D:d,h:o,m:i,s,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=m;var E="$isDayjsObject",w=function(e){return e instanceof S||!(!e||!e[E])},k=function e(t,n,r){var s;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();b[i]&&(s=i),n&&(b[i]=n,s=i);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var a=t.name;b[a]=t,s=a}return!r&&s&&(y=s),s||!r&&y},P=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},x=v;x.l=k,x.i=w,x.w=function(e,t){return P(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function m(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[E]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return x},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(e,t){var n=P(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return P(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<P(e)},g.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!x.u(t)||t,l=x.p(e),f=function(e,t){var s=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?s:s.endOf(a)},p=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},_=this.$W,m=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case h:return r?f(1,0):f(31,11);case u:return r?f(1,m):f(0,m+1);case c:var y=this.$locale().weekStart||0,b=(_<y?_+7:_)-y;return f(r?g-b:g+(6-b),m);case a:case d:return p(v+"Hours",0);case o:return p(v+"Minutes",1);case i:return p(v+"Seconds",2);case s:return p(v+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,c=x.p(e),l="set"+(this.$u?"UTC":""),f=(n={},n[a]=l+"Date",n[d]=l+"Date",n[u]=l+"Month",n[h]=l+"FullYear",n[o]=l+"Hours",n[i]=l+"Minutes",n[s]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],p=c===a?this.$D+(t-this.$W):t;if(c===u||c===h){var _=this.clone().set(d,1);_.$d[f](p),_.init(),this.$d=_.set(d,Math.min(this.$D,_.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[x.p(e)]()},g.add=function(r,l){var d,f=this;r=Number(r);var p=x.p(l),_=function(e){var t=P(f);return x.w(t.date(t.date()+Math.round(e*r)),f)};if(p===u)return this.set(u,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===a)return _(1);if(p===c)return _(7);var m=(d={},d[i]=t,d[o]=n,d[s]=e,d)[p]||1,g=this.$d.getTime()+r*m;return x.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=x.z(this),i=this.$H,o=this.$m,a=this.$M,c=n.weekdays,u=n.months,l=n.meridiem,h=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},d=function(e){return x.s(i%12||12,e,"0")},p=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(_,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return x.s(t.$y,4,"0");case"M":return a+1;case"MM":return x.s(a+1,2,"0");case"MMM":return h(n.monthsShort,a,u,3);case"MMMM":return h(u,a);case"D":return t.$D;case"DD":return x.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,c,2);case"ddd":return h(n.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(i);case"HH":return x.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return p(i,o,!0);case"A":return p(i,o,!1);case"m":return String(o);case"mm":return x.s(o,2,"0");case"s":return String(t.$s);case"ss":return x.s(t.$s,2,"0");case"SSS":return x.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,d,f){var p,_=this,m=x.p(d),g=P(r),v=(g.utcOffset()-this.utcOffset())*t,y=this-g,b=function(){return x.m(_,g)};switch(m){case h:p=b()/12;break;case u:p=b();break;case l:p=b()/3;break;case c:p=(y-v)/6048e5;break;case a:p=(y-v)/864e5;break;case o:p=y/n;break;case i:p=y/t;break;case s:p=y/e;break;default:p=y}return f?p:x.a(p)},g.daysInMonth=function(){return this.endOf(u).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return x.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),O=S.prototype;return P.prototype=O,[["$ms",r],["$s",s],["$m",i],["$H",o],["$W",a],["$M",u],["$y",h],["$D",d]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),P.extend=function(e,t){return e.$i||(e(t,S,P),e.$i=!0),P},P.locale=k,P.isDayjs=w,P.unix=function(e){return P(1e3*e)},P.en=b[y],P.Ls=b,P.p={},P}()},9435:e=>{var t=1e3,n=60*t,r=60*n,s=24*r,i=365.25*s;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o)return;var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return a.long?o(c=e,s,"day")||o(c,r,"hour")||o(c,n,"minute")||o(c,t,"second")||c+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1227:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e={}.DEBUG),e}(t=e.exports=n(1658)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var s=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(s++,"%c"===e&&(i=s))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},1658:(e,t,n)=>{var r;function s(e){function n(){if(n.enabled){var e=n,s=+new Date,i=s-(r||s);e.diff=i,e.prev=r,e.curr=s,r=s;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var s=t.formatters[r];if("function"==typeof s){var i=o[c];n=s.call(e,i),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o),(n.log||t.log||void 0).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=s.debug=s.default=s).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,s=0;s<r;s++)n[s]&&("-"===(e=n[s].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(9435),t.names=[],t.skips=[],t.formatters={}},5158:(e,t,n)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=n(1227):e.exports=n(39)},39:(e,t,n)=>{var r=n(6224),s=n(3837);(t=e.exports=n(1658)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return o.write(s.format.apply(s,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace,r=this.useColors;if(r){var s=this.color,i="  [3"+s+";1m"+n+" [0m";e[0]=i+e[0].split("\n").join("\n"+i),e.push("[3"+s+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+n+" "+e[0]},t.save=function(e){null==e&&delete{}.DEBUG},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys({}).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),r={}[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{});var i=parseInt({}.DEBUG_FD,10)||2;1!==i&&2!==i&&s.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var o=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new r.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":(t=new(n(7147).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(t=new(n(1808).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return{}.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)},t.enable(a())},2261:(e,t,n)=>{var r;e.exports=function(){if(!r){try{r=n(5158)("follow-redirects")}catch(e){}"function"!=typeof r&&(r=function(){})}r.apply(null,arguments)}},938:(e,t,n)=>{var r=n(7310),s=r.URL,i=n(3685),o=n(5687),a=n(2781).Writable,c=n(9491),u=n(2261),l=["abort","aborted","connect","error","socket","timeout"],h=Object.create(null);l.forEach((function(e){h[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}}));var d=k("ERR_INVALID_URL","Invalid URL",TypeError),f=k("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),p=k("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),_=k("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),m=k("ERR_STREAM_WRITE_AFTER_END","write after end"),g=a.prototype.destroy||b;function v(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){n._processResponse(e)},this._performRequest()}function y(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(i){var o=i+":",a=n[o]=e[i],l=t[i]=Object.create(a);Object.defineProperties(l,{request:{value:function(e,i,a){if(x(e)){var l;try{l=E(new s(e))}catch(t){l=r.parse(e)}if(!x(l.protocol))throw new d({input:e});e=l}else s&&e instanceof s?e=E(e):(a=i,i=e,e={protocol:o});return S(i)&&(a=i,i=null),(i=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,i)).nativeProtocols=n,x(i.host)||x(i.hostname)||(i.hostname="::1"),c.equal(i.protocol,o,"protocol mismatch"),u("options",i),new v(i,a)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var r=l.request(e,t,n);return r.end(),r},configurable:!0,enumerable:!0,writable:!0}})})),t}function b(){}function E(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function w(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return null==n?void 0:String(n).trim()}function k(e,t,n){function r(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r}function P(e,t){for(var n of l)e.removeListener(n,h[n]);e.on("error",b),e.destroy(t)}function x(e){return"string"==typeof e||e instanceof String}function S(e){return"function"==typeof e}v.prototype=Object.create(a.prototype),v.prototype.abort=function(){P(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},v.prototype.destroy=function(e){return P(this._currentRequest,e),g.call(this,e),this},v.prototype.write=function(e,t,n){if(this._ending)throw new m;if(!x(e)&&("object"!=typeof(r=e)||!("length"in r)))throw new TypeError("data should be a string, Buffer or Uint8Array");var r;S(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new _),this.abort()):n&&n()},v.prototype.end=function(e,t,n){if(S(e)?(n=e,e=t=null):S(t)&&(n=t,t=null),e){var r=this,s=this._currentRequest;this.write(e,t,(function(){r._ended=!0,s.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},v.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},v.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},v.prototype.setTimeout=function(e,t){var n=this;function r(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function s(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),i()}),e),r(t)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",s)}return t&&this.on("timeout",t),this.socket?s(this.socket):this._currentRequest.once("socket",s),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){v.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(v.prototype,e,{get:function(){return this._currentRequest[e]}})})),v.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},v.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var s=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var i of(s._redirectable=this,l))s.on(i,h[i]);if(this._currentUrl=/^\//.test(this._options.path)?r.format(this._options):this._options.path,this._isRedirect){var o=0,a=this,c=this._requestBodyBuffers;!function e(t){if(s===a._currentRequest)if(t)a.emit("error",t);else if(o<c.length){var n=c[o++];s.finished||s.write(n.data,n.encoding,e)}else a._ended&&s.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},v.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(P(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new p);else{var s,i=this._options.beforeRedirect;i&&(s=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var o=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],w(/^content-/i,this._options.headers));var a,l=w(/^host$/i,this._options.headers),h=r.parse(this._currentUrl),d=l||h.host,_=/^\w+:/.test(n)?this._currentUrl:r.format(Object.assign(h,{host:d}));try{a=r.resolve(_,n)}catch(e){return void this.emit("error",new f({cause:e}))}u("redirecting to",a),this._isRedirect=!0;var m=r.parse(a);if(Object.assign(this._options,m),(m.protocol!==h.protocol&&"https:"!==m.protocol||m.host!==d&&!function(e,t){c(x(e)&&x(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(m.host,d))&&w(/^(?:authorization|cookie)$/i,this._options.headers),S(i)){var g={headers:e.headers,statusCode:t},v={url:_,method:o,headers:s};try{i(this._options,g,v)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){this.emit("error",new f({cause:e}))}}},e.exports=y({http:i,https:o}),e.exports.wrap=y},1713:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>d});var r=n(7147),s=n(2851),i=n(9669),o=n.n(i),a=n(1017),c=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const u=n(1017);var l;!function(e){e.All="all",e.Texture="texture",e.Audio="audio"}(l||(l={}));class h{constructor(){this.sub=""}}class d extends s.X{isUnderAssets(e){if(this.adaptation.Env.isPlugin){e=e.replace(/\\/g,"/");let t=(0,a.join)(this.adaptation.Project.path,"assets").replace(/\\/g,"/");if(0===e.indexOf(t))return!0}return!1}delete(e){return c(this,void 0,void 0,(function*(){if(this.adaptation.Env.isPluginV2);else if(this.adaptation.Env.isPluginV3){const t=yield this.adaptation.Util.uuidToFspath(e);this.adaptation.Util.fspathToUrl(t);Editor.Message.request("asset-db","delete-asset",e)}}))}import(e,t){return c(this,void 0,void 0,(function*(){const n=[];if(this.adaptation.Env.isWeb)return n;if(this.adaptation.Env.isPluginV2)return new Promise(((r,s)=>{Editor.assetdb.import(e,t,((e,t)=>{e||t.forEach((e=>{n.push({uuid:e.uuid,url:e.url,path:e.path,type:e.type})})),r(n)}))}));if(this.adaptation.Env.isPluginV3)for(let s=0;s<e.length;s++){const i=e[s];if((0,r.existsSync)(i)){const e=this.adaptation.Util.urlToFspath(t),r=this.adaptation.Util.fspathToUrl((0,a.join)(e,(0,a.basename)(i))),s=yield Editor.Message.request("asset-db","import-asset",i,r,{overwrite:!0,rename:!0});n.push({uuid:s.uuid||"",url:s.url||"",path:s.file||"",type:s.type||""})}}return n}))}refresh(e){this.adaptation.Env.isPluginV2?Editor.assetdb.refresh(e):Editor.Message.request("asset-db","refresh-asset",e)}hint(e){this.adaptation.Env.isPluginV2?Editor.Ipc.sendToAll("assets:hint",e):this.adaptation.Env.isPluginV3&&Editor.Message.broadcast("ui-kit:touch-asset",e)}queryAssets(){return c(this,arguments,void 0,(function*(e=l.Texture,t={}){const n={};if(this.adaptation.Env.isPluginV2)return n[l.Texture]="texture",new Promise(((r,s)=>{Editor.assetdb.queryAssets("db://assets/**/*",n[e],(function(n,s){if(n)return void r([]);const i=[];s.forEach((n=>{const{destPath:r,hidden:s,isSubAsset:o,path:a,readonly:c,type:u,url:l,uuid:d}=n,f=new h;f.url=l,f.path=a,f.uuid=d,f.originType=u,f.type=e,t.filter?t.filter(n,f)&&i.push(f):i.push(f)})),r(i)}))}));if(this.adaptation.Env.isPluginV3){n[l.Texture]="image",n[l.All]="";const r=yield Editor.Message.request("asset-db","query-assets",{pattern:"db://assets/**/*",type:n[e]}),s=[];return r.forEach((n=>{const{isDirectory:r,visible:i,file:o,path:c,readonly:u,type:l,url:d,uuid:f}=n;let p=!0;if(t.onlyFiles&&r&&(p=!1),p){const r=new h;if(r.url=d,"cc.SpriteFrame"===l){const e=(0,a.normalize)(d).split(a.sep),t=e.pop();r.sub="spriteFrame"===t?"":t;const n=e.join("/");r.path=this.adaptation.Util.urlToFspath(n)}else r.path=o;r.uuid=f,r.originType=l,r.type=e,t.filter?t.filter(n,r)&&s.push(r):s.push(r)}})),s}return[]}))}open(e){return c(this,void 0,void 0,(function*(){if(this.adaptation.Env.isPluginV2){const t=yield this.adaptation.Util.uuidToFspath(e);switch((0,a.extname)(t)){case".effect":case".js":case".ts":Editor.Ipc.sendToMain("assets:open-text-file",e);break;case".fire":Editor.Ipc.sendToMain("scene:open-by-uuid",e);break;case".prefab":Editor.Ipc.sendToAll("scene:enter-prefab-edit-mode",e)}}else this.adaptation.Env.isPluginV3&&(yield Editor.Message.request("asset-db","open-asset",e))}))}create(e,t){this.adaptation.Env.isPluginV2?Editor.assetdb.create(e,t,(function(e,t){})):Editor.Message.request("asset-db","create-asset",e,t)}createPrefab(e,t){return c(this,void 0,void 0,(function*(){if(this.adaptation.Env.isPluginV2);else if(this.adaptation.Env.isPluginV3){return(yield Editor.Message.request("scene","create-prefab",t,e))||""}return""}))}createScene(){}fileData(e){return c(this,void 0,void 0,(function*(){let t=this.adaptation.Util.urlToFspath(e);if(t){if(this.adaptation.Env.isWeb){if(u.extname(t)){return(yield o().get(t)).data}return""}if(this.adaptation.Env.isPlugin)return[".plist",".json","txt",".atlas",".log"].includes((0,a.extname)(t))?(0,r.readFileSync)(t,"utf-8"):(0,r.readFileSync)(t).buffer}return""}))}getWorkspaceDirectory(){return""}getStaticFile(e,t=!1){var n;let s=null===(n=this.adaptation.config)||void 0===n?void 0:n.options.staticFileDirectory;if(!s)return"";s.startsWith("./")&&(s=s.substring(2)),e.startsWith(s)&&(e=e.substring(s.length+1));let i="";if(this.adaptation.Env.isDev){const t=this.getWorkspaceDirectory();i=(0,a.join)(t,s,e)}else{const t=`packages://${this.adaptation.config.manifest.name}/${s}/${e}`;i=this.adaptation.Util.urlToFspath(t)||""}return t?(0,r.existsSync)(i)?i:"":i}}},2851:(e,t,n)=>{"use strict";n.d(t,{X:()=>r});class r{constructor(e){this.adaptation=e}}},1104:(e,t,n)=>{"use strict";n.d(t,{I:()=>_});var r=n(2851),s=n(4620),i=n(7147),o=n(1017);function a(e,t){const n=(0,o.join)(e,t);if(!(0,i.existsSync)(n))return null;let r=null;try{r=JSON.parse((0,i.readFileSync)(n,"utf-8"))}catch(e){r=null}return r}function c(e){return a(e,"local/builder.json")}function u(e){return a(e,"settings/builder.json")}function l(e,t){const n=function(e){return a(e,"profiles/v2/packages/native.json")}(e);if(!n)return null;const r=n.builder.taskOptionsMap[t];return r||null}function h(e,t){const n=function(e){return a(e,"profiles/v2/packages/android.json")}(e);if(!n)return null;const r=n.builder.taskOptionsMap[t];return r||null}var d=n(7484),f=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const p=n(1017);class _ extends r.X{getEncryptInfo(){const e={key:"",encrypt:!1,zip:!1};if(this.adaptation.Env.isPluginV2){const t=u(this.adaptation.Project.path);t&&(e.encrypt=t.encryptJs,e.key=t.xxteaKey,e.zip=t.zipCompressJs)}else if(this.adaptation.Env.isPluginV3){const t=this.getLatestBuildTask();if(!t)return null;const n=l(this.adaptation.Project.path,t.id);if(!n)return null;e.encrypt=n.encrypted,e.key=n.xxteaKey,e.zip=n.compressZip}return e}getAndroidInfo(){const e={package:"",orientation:"",name:""};function t(t,n,r,s){e.orientation=t&&n&&r&&s?"fullSensor":t||n||r||s?t&&n?"sensorLandscape":t?"reverseLandscape":n?"landscape":s?"sensorPortrait":r?"portrait":"unspecified":"unspecified"}if(this.adaptation.Env.isPluginV2){const n=u(this.adaptation.Project.path);if(n&&n.android){e.package=n.android.packageName||"",e.name=n.title||"";const{landscapeLeft:r,landscapeRight:s,portrait:i,upsideDown:o}=n.orientation;t(r,s,i,o)}}else if(this.adaptation.Env.isPluginV3){const n=this.getLatestBuildTask();if(!n)return null;const r=h(this.adaptation.Project.path,n.id);if(!r)return null;if(!l(this.adaptation.Project.path,n.id))return null;e.package=r.packageName||"",e.name=n.options.name||"";const{landscapeLeft:s,landscapeRight:i,portrait:o,upsideDown:a}=r.orientation;t(s,i,o,a)}return e}getLatestBuildDirectory(){if(this.adaptation.Env.isPluginV2){const e=c(this.adaptation.Project.path);if(!e)return"";if(!e.buildPath)return"";if(e.buildPath=p.join(this.adaptation.Project.path,e.buildPath),!i.existsSync(e.buildPath))return"";if(!e.actualPlatform)return"";let t=null;return t=[s.t4.Android,s.t4.Ios,s.t4.Win32].includes(e.actualPlatform)?p.join(e.buildPath,`jsb-${e.template}`):p.join(e.buildPath,e.actualPlatform),t&&i.existsSync(t)?t:""}if(this.adaptation.Env.isPluginV3){const e=this.getLatestBuildTask();if(e&&e.options){const{buildPath:t,outputName:n}=e.options,r=this.adaptation.Util.urlToFspath(t),s=(0,o.join)(r,n);if(i.existsSync(s))return s}}return""}getLatestBuildPlatform(){var e;if(this.adaptation.Env.isPluginV2){const e=c(this.adaptation.Project.path);return e&&e.platform||s.t4.Unknown}if(this.adaptation.Env.isPluginV3){const t=this.getLatestBuildTask();if(t)return(null===(e=t.options)||void 0===e?void 0:e.platform)||s.t4.Unknown}return s.t4.Unknown}getLatestBuildTask(){const e=a(this.adaptation.Project.path,"profiles/v2/packages/builder.json");if(e){const{taskMap:t}=e.BuildTaskManager;if(t){const e=[];for(const n in t){const r=t[n];r.dirty||e.push(r)}if(e.length)return e.sort(((e,t)=>{const n=d(e.time).valueOf();return d(t.time).valueOf()-n})),e[0]}}return null}isNativePlatform(e){return!![s.t4.Android,s.t4.Ios,s.t4.Mac,s.t4.Win32].includes(e)}getConfig(){return f(this,void 0,void 0,(function*(){let e=[];if(this.adaptation.Env.isPluginV2){const t=p.join(this.adaptation.Project.path,"local/builder.json");if(i.existsSync(t)){const n=JSON.parse(i.readFileSync(t,"utf-8")),r=p.join(this.adaptation.Project.path,n.buildPath);if(this.isNativePlatform(n.platform)){let t=p.join(r,`jsb-${n.template}`);e.push({buildPath:r,outputPath:t,platform:n.platform,md5Cache:!1})}else{let t=p.join(r,n.platform);e.push({buildPath:r,outputPath:t,platform:n.platform,md5Cache:!1})}}}else if(this.adaptation.Env.isPluginV3){let t=yield Editor.Profile.getConfig("builder","BuildTaskManager.taskMap","local");Object.keys(t).forEach((n=>{const r=t[n].options;if(r){const t=this.adaptation.Util.urlToFspath(r.buildPath),n=t?p.join(t,r.outputName):r.buildPath;e.push({buildPath:t,outputPath:n,platform:r.platform,md5Cache:r.md5Cache})}}))}return e}))}}},6480:(e,t,n)=>{"use strict";n.d(t,{V:()=>u});var r=n(7147),s=n(2851),i=n(1017),o=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};const a={type:"question",title:"æç¤º",message:"æç¤ºæ¶ˆæ¯",buttons:["ç¡®å®š","å–æ¶ˆ"],defaultId:0,cancelId:1,noLink:!0},c=n(9496);class u extends s.X{message(e){var t;return"string"==typeof e&&(e={message:e}),e=Object.assign(a,e),this.adaptation.Env.isWeb?confirm(e.message||""):!(null===(t=c.remote)||void 0===t?void 0:t.dialog.showMessageBoxSync(e))}readAsBase64(e){return o(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{t(e.target.result)},["image/png","image/jpeg"].find((t=>t===e.type))?r.readAsDataURL(e):t("")}))}))}readAsArrayBuffer(e){return o(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{const n=e.target.result;t(n)},r.readAsArrayBuffer(e)}))}))}open(e){if(this.adaptation.Env.isWeb);else{if(!r.existsSync(e))return;r.statSync(e).isDirectory(),c.shell.showItemInFolder(e),c.shell.beep()}}select(e){return o(this,void 0,void 0,(function*(){if(e=Object.assign({fillData:!0},e),this.adaptation.Env.isWeb)return new Promise(((t,n)=>{var r;const s=document.createElement("input");s.type="file","directory"===e.type&&(s.setAttribute("directory",""),s.setAttribute("webkitdirectory",""));const a={".png":this.readAsArrayBuffer,".txt":this.readAsArrayBuffer,".jpg":this.readAsArrayBuffer,".jpeg":this.readAsArrayBuffer,".ttf":this.readAsArrayBuffer,".js":this.readAsArrayBuffer,".jsc":this.readAsArrayBuffer,".so":this.readAsArrayBuffer};if(null===(r=e.filters)||void 0===r?void 0:r.length){let t=[];e.filters=this.dealFilterExtensions(e.filters,!1);const n=Object.keys(a);e.filters[0].extensions.forEach((e=>{const r=n.find((t=>t===e.toLocaleLowerCase()));r&&t.push(r)})),s.accept=t.join(",")}s.multiple=!!e.multi,s.addEventListener("change",(()=>o(this,void 0,void 0,(function*(){let n={},r=!0;!1===e.fillData&&(r=!1);for(let t=0;t<s.files.length;t++){const o=s.files[t];if(r){if(!this.canReadFileByFilter(o.name,e))continue;const t=(0,i.extname)(o.name).toLocaleLowerCase();let r=a[t];r||(r=this.readAsArrayBuffer);const s=yield r(o);s&&(n[o.name.toString()]=s)}else n[o.name.toString()]=""}t(n)})))),s.dispatchEvent(new MouseEvent("click"))}));if(this.adaptation.Env.isPluginV2){const t={title:e.title,defaultPath:e.path,properties:[""],filters:[]};if("directory"===e.type)t.properties=["openDirectory"];else if("file"===e.type){t.properties=["openFile"];const n=this.dealFilterExtensions(e.filters||[],!0);t.filters=n}const n=Editor.Dialog.openFile(t);if(-1===n)return{};const s={};return(n||[]).forEach((t=>{"file"===e.type&&e.fillData?s[t]=r.readFileSync(t):s[t]=null})),s}{const t={};e.filters&&(e.filters=this.dealFilterExtensions(e.filters||[],!0));return((yield Editor.Dialog.select(e)).filePaths||[]).forEach((n=>{"file"===e.type&&e.fillData?t[n]=r.readFileSync(n).buffer:t[n]=null})),t}}))}canReadFileByFilter(e,t){const n=t.filters||[];if(n.length<=0)return!0;const r=(0,i.extname)(e);return!!n.find((e=>e.extensions.find((e=>e===r))))}dealFilterExtensions(e,t){const n=e||[];return n.forEach((e=>{e.extensions=e.extensions.map((e=>t&&e.startsWith(".")?e.substring(1,e.length):t||e.startsWith(".")?e:"."+e))})),n}}},1568:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});var r=n(2851),s=n(7147),i=n(1017),o=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class a extends r.X{downloadFile(e,t){return o(this,arguments,void 0,(function*(e,t,n=!1){let r=null;if(n){const e=window.atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);r=new Blob([n],{type:"image/png"})}else r=new Blob([t]);return yield this.downloadBlobFile(e,r)}))}downloadBlobFile(e,t){return o(this,void 0,void 0,(function*(){function n(){let n=document.createElement("a");document.createEvent("HTMLEvents").initEvent("click",!0,!0),n.download=e,n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}if(this.adaptation.Env.isWeb)return n(),!0;if(this.adaptation.Env.isPluginV2)return n(),!0;if(this.adaptation.Env.isPluginV3){const n=yield Editor.Dialog.select({path:this.adaptation.Project.path,title:"save file to",type:"directory",multi:!1,filters:[]});if(!n.filePaths)return!1;const r=n.filePaths[0];if(!r)return!1;const o=(0,i.join)(r,e);try{return(0,s.writeFileSync)(o,Buffer.from(yield t.arrayBuffer())),this.adaptation.Shell.showItem(o),!0}catch(e){return!1}}return!1}))}}},3328:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n(2037),s=n(2851),i=n(7147),o=n(1017);class a extends s.X{constructor(){super(...arguments),this._version=""}get path(){return this.adaptation.Env.isPlugin?(0,o.dirname)(this.appPath):""}get appPath(){return Editor.App&&Editor.App.path?Editor.App.path:Editor.appPath||""}get node_modules(){if(this.adaptation.Env.isPlugin){if(this.appPath)return(0,o.join)(this.appPath,"node_modules")}return""}get version(){return this._version||(this.adaptation.Env.isPluginV2?"browser"===process.type?this._version=Editor.App.version:this._version=Editor.remote.App.version:this.adaptation.Env.isPluginV3&&(this._version=Editor.App.version)),this._version}isVersionLess(e){const t=e.split("."),n=this.version.split("."),r=Math.min(t.length,n.length);for(let e=0;e<r;e++){const r=parseInt(t[e]);if(parseInt(n[e])>r)return!1}return!0}getScriptEditor(){const e=(0,o.join)((0,r.homedir)(),".CocosCreator","profiles","settings.json");if(!(0,i.existsSync)(e))return null;try{const t=JSON.parse((0,i.readFileSync)(e,"utf-8"));let n=t["script-editor"];return n||(n=t["script-editor-list"],n&&Array.isArray(n)&&n.length&&n[0].value||null)}catch(e){return null}}}},7645:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(4620),s=n(2851);class i extends s.X{constructor(){super(...arguments),this._type=null}init(){this._type="cp-v3"}get isDev(){return!1}get isWeb(){return this._type===r.zV.Web}get isX86(){return"x86"===process.arch}get isX64(){return"x64"===process.arch}get isChrome(){return this._type===r.zV.Chrome}get isChromeRuntime(){return this.isChrome&&chrome&&chrome.runtime}get isChromeDevtools(){return this.isChrome&&chrome&&chrome.devtools}get isElectron(){return this._type===r.zV.Electron}get isPluginV2(){return this._type===r.zV.PluginV2}get pluginDirectory(){return this.isPluginV2?"packages":this.isPluginV3?"extensions":""}get isPluginV3(){return this._type===r.zV.PluginV3}get isPlugin(){return this.isPluginV2||this.isPluginV3}get isWin(){return"win32"===process.platform}get isMac(){return"darwin"===process.platform}}},7886:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>Adaptation});var _declare__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4620),_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2457),_env__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7645),_simulator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3361),_project__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8206),_panel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5384),_editor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3328),_assetdb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1713),_shell__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4209),_dialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6480),_builder__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1104),_log__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(4348),_menu__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2940),_download__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1568),_ip__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7749),_settings__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(903);class Adaptation{constructor(){this.config=null,this.options=null,this.Util=new _util__WEBPACK_IMPORTED_MODULE_1__.Z(this),this.Env=new _env__WEBPACK_IMPORTED_MODULE_2__.X(this),this.Simulator=new _simulator__WEBPACK_IMPORTED_MODULE_3__.X(this),this.Project=new _project__WEBPACK_IMPORTED_MODULE_4__.I(this),this.Panel=new _panel__WEBPACK_IMPORTED_MODULE_5__.s(this),this.CCEditor=new _editor__WEBPACK_IMPORTED_MODULE_6__.x(this),this.AssetDB=new _assetdb__WEBPACK_IMPORTED_MODULE_7__.Dt(this),this.Shell=new _shell__WEBPACK_IMPORTED_MODULE_8__.N(this),this.Dialog=new _dialog__WEBPACK_IMPORTED_MODULE_9__.V(this),this.Builder=new _builder__WEBPACK_IMPORTED_MODULE_10__.I(this),this.Log=new _log__WEBPACK_IMPORTED_MODULE_15__.Z(this),this.Menu=new _menu__WEBPACK_IMPORTED_MODULE_11__.v(this),this.Download=new _download__WEBPACK_IMPORTED_MODULE_12__.U(this),this.IP=new _ip__WEBPACK_IMPORTED_MODULE_13__.IP(this),this.Settings=new _settings__WEBPACK_IMPORTED_MODULE_14__.Z(this)}require(name){if(this.Env.isPluginV2)return Editor.require(`packages://${config.manifest.name}/node_modules/${name}`);{const url=`packages://${this.config.manifest.name}/node_modules/${name}`,fsPath=this.Util.urlToFspath(url);return fsPath?eval("require(`${fsPath}`)"):null}}url(e){return this.Env.isPluginV2?Editor.url(e):this.Util.urlToFspath(e)}log(e){this.Log.log(e)}init(e){this.Env.init(),"undefined"!=typeof __PANEL__?__PANEL__.type!==_declare__WEBPACK_IMPORTED_MODULE_0__.s_.Type.Floating&&this.Util.init():this.Util.init(),this.config=e}get isProcessRenderer(){return"renderer"===process.type}}},7749:(e,t,n)=>{"use strict";n.d(t,{IP:()=>o});var r=n(2037),s=n(2851),i=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class o extends s.X{_getIpByRTC(){return new Promise(((e,t)=>{const n=new window.RTCPeerConnection({iceServers:[]});n.onicecandidate=t=>{if(t.candidate){const n=t.candidate.address;n&&4===n.split(".").length?e(n):e("")}},n.createDataChannel(""),n.createOffer(n.setLocalDescription.bind(n),(()=>{}))}))}checkIp(e){const t=e.split(".");if(4!==t.length)return"ipæ ¼å¼ä¸æ­£ç¡®";for(let e=0;e<t.length;e++){const n=parseInt(t[e]);if(n<0||n>255)return`ipæ®µ${n}å¿…é¡»åœ¨[0-255]`}return""}getLocalIP(){return i(this,void 0,void 0,(function*(){let e="";if(this.adaptation.Env.isWeb)return e=yield this._getIpByRTC(),e;{const t=(0,r.networkInterfaces)();return Object.keys(t).forEach((n=>{const r=t[n];r&&r.forEach((t=>{"IPv4"===t.family&&!1===t.internal&&(e=t.address)}))})),e}}))}}},4348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2851);class s extends r.X{error(e){this.adaptation.Env.isWeb}log(e){if(this.adaptation.Env.isWeb);else if(this.adaptation.Env.isPluginV2)Editor.log(e);else if(this.adaptation.Env.isPluginV3){(0,console.log)(e)}}info(e){this.adaptation.Env.isWeb}}},2940:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(2851);const s=n(9496);class i extends r.X{popup(e,t,n){if(t=t.map((e=>({name:e.name,callback:e.callback||null,enabled:e.enabled}))),this.adaptation.Env.isWeb){const{web:r}=n;r&&r(e,t)}else{const{Menu:e,MenuItem:n,getCurrentWindow:r}=s.remote;let i=new e;for(let e=0;e<t.length;e++){let r=t[e];i.append(new n({label:r.name,click:r.callback}))}i.popup(r())}}}},5384:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n(2851),s=n(4547),i=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class o extends r.X{getPanelKey(e){var t;const n=e.split(".");if(n.length>=2){let[e,r]=n;if(!this.adaptation.config)throw new Error("æœªè®¾ç½®config");const{manifest:s,options:i}=this.adaptation.config;return"self"!==e||(e=s.name,null===(t=null==s?void 0:s.panels)||void 0===t?void 0:t.find((e=>e.name===r)))?`${e}.${r}`:null}return null}open(e){const t=this.getPanelKey(e);t&&Editor.Panel.open(t)}close(){}send(e,t,...n){if("function"==typeof n)return!1;const r=this.getPanelKey(e);if(r){if(this.adaptation.Env.isPluginV2)return Editor.Ipc.sendToPanel(r,t,...n),!0;if(this.adaptation.Env.isPluginV3){const[e,i]=r.split("."),o=(0,s.Gd)(i);return Editor.Message.send(e,o,t,...n),!0}}return!1}sendToMain(e,t,n,r){if("function"==typeof n)return!1;const{manifest:s,options:i}=this.adaptation.config;if("self"===e&&(e=s.name),this.adaptation.Env.isPluginV2){if(this.adaptation.isProcessRenderer)return Editor.Ipc.sendToMain(`${e}:${t}`,n,((e,t)=>{r&&r(e,t)})),!0}else this.adaptation.Env.isPluginV3&&Editor.Message.send(e,t,n);return!1}executeSceneScript(e,...t){return i(this,void 0,void 0,(function*(){const{manifest:n}=this.adaptation.config;if(this.adaptation.Env.isPluginV2)return new Promise(((r,s)=>{Editor.Scene.callSceneScript(n.name,e,...t,(function(e,t){r(t)}))}));if(this.adaptation.Env.isPluginV3){const r={name:n.name,method:e,args:t};return Editor.Message.request("scene","execute-scene-script",r)}return null}))}}},8206:(e,t,n)=>{"use strict";n.d(t,{I:()=>f});var r=n(2851);const{V246:s,V247:i,V248:o,V249:a,V2410:c,V2411:u,V2412:l,V2413:h,V2414:d}={V232:"2.3.2",V233:"2.3.3",V234:"2.3.4",V240:"2.4.0",V241:"2.4.1",V242:"2.4.2",V243:"2.4.3",V244:"2.4.4",V245:"2.4.5",V246:"2.4.6",V247:"2.4.7",V248:"2.4.8",V249:"2.4.9",V2410:"2.4.10",V2411:"2.4.11",V2412:"2.4.12",V2413:"2.4.13",V2414:"2.4.14",V300:"3.0.0",V301:"3.0.1",V310:"3.1.0",V311:"3.1.1",V312:"3.1.2",V320:"3.2.0",V321:"3.2.1",V330:"3.3.0",V331:"3.3.1",V332:"3.3.2",V340:"3.4.0",V341:"3.4.1",V342:"3.4.2",V350:"3.5.0",V351:"3.5.1",V352:"3.5.2",V360:"3.6.0",V361:"3.6.1",V362:"3.6.2",V363:"3.6.3",V370:"3.7.0",V371:"3.7.1",V372:"3.7.2",V373:"3.7.3",V374:"3.7.4",V380:"3.8.0",V381:"3.8.1",V382:"3.8.2",V383:"3.8.3",V384:"3.8.4"};class f extends r.X{constructor(){super(...arguments),this._path=""}isValid(e){}set path(e){this.adaptation.Env.isWeb&&(this._path=e)}get path(){return this.adaptation.Env.isPluginV2?(this._path||(this._path=this.adaptation.Util.getProperty([["Editor","Project","path"],["Editor","projectInfo","path"]])||""),this._path):this.adaptation.Env.isWeb?this._path:this.adaptation.Env.isPluginV3?Editor.Project.path:""}}},903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2851),s=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class i extends r.X{getKey(e){return s(this,void 0,void 0,(function*(){var t;const n=null===(t=this.adaptation.config)||void 0===t?void 0:t.manifest;if(!n)return null;if(this.adaptation.Env.isPluginV3){const t=this.keyWhere(e);return yield Editor.Profile.getConfig(null==n?void 0:n.name,e,t)}return null}))}setKey(e,t){return s(this,void 0,void 0,(function*(){var n;const r=null===(n=this.adaptation.config)||void 0===n?void 0:n.manifest;if(r&&this.adaptation.Env.isPluginV3){const n=this.keyWhere(e);yield Editor.Profile.setConfig(null==r?void 0:r.name,e,n,t)}}))}whertConfig(e){const t={editor:"global",project:"local"};return t[e]||e}keyWhere(e){var t;let n="default";const r=null===(t=this.adaptation.config)||void 0===t?void 0:t.manifest;if(!r)return n;if(!r.settings)return n;const s=r.settings.find((t=>t.key===e));return s&&(n=s.type),n}}},4209:(e,t,n)=>{"use strict";n.d(t,{N:()=>c});var r=n(7147),s=n(2037),i=n(2851),o=n(1017);const a=n(9496);class c extends i.X{_getCmd(e){if(!(0,r.existsSync)(e))return"";(0,r.statSync)(e).isFile()&&(e=(0,o.dirname)(e));let t="";switch(s.platform()){case"win32":t=`start "" "${e}"`;break;case"darwin":t=`open "${e}"`}return t}showItem(e){var t,n,s;if(!this.adaptation.Env.isWeb&&(0,r.existsSync)(e)&&(e=e.replace(/\//g,o.sep),this.adaptation.Env.isPlugin)){const r=(null===(n=null===(t=a.remote)||void 0===t?void 0:t.shell)||void 0===n?void 0:n.showItemInFolder)||(null===(s=a.shell)||void 0===s?void 0:s.showItemInFolder)||null;r&&r(e)}}beep(){var e,t,n,r;this.adaptation.Env.isPluginV2?null===(t=null===(e=a.remote)||void 0===e?void 0:e.shell)||void 0===t||t.beep():this.adaptation.Env.isPluginV3?null===(r=null===(n=a.remote)||void 0===n?void 0:n.shell)||void 0===r||r.beep():this.adaptation.Env.isWeb}openUrl(e){this.adaptation.Env.isWeb?window.open(e):a.shell.openExternal(e)}}},3361:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(2851);const s=n(1017);class i extends r.X{get path(){if(this.adaptation.Env.isPluginV2)return s.join(this.adaptation.CCEditor.path,"cocos2d-x/simulator/");if(!this.adaptation.Env.isPluginV3)throw new Error("not support env");return this.adaptation.Env.isWin?s.join(this.adaptation.CCEditor.path,"resources/resources/3d/engine/native/simulator/Release"):this.adaptation.Env.isMac?s.join(this.adaptation.CCEditor.path,"resources/3d/engine-native/simulator/Debug/"):""}get remoteAssetDir(){const e="Contents/Resources/remote-asset";if(this.adaptation.Env.isWeb)return"";if(this.adaptation.Env.isPluginV2){if(this.adaptation.Env.isWin)return s.join(this.path,"win32/remote-asset");if(this.adaptation.Env.isMac)return s.join(this.path,"mac/Simulator.app/",e)}else if(this.adaptation.Env.isPluginV3){if(this.adaptation.Env.isWin)return s.join(this.path,"remote-asset");if(this.adaptation.Env.isMac)return s.join(this.path,"SimulatorApp-Mac.app",e)}}}},2457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Util});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7147),fs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__),_base__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2851),path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1017),path__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__),url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7310),url__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_2__),os__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2037),os__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(os__WEBPACK_IMPORTED_MODULE_3__),__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};class Util extends _base__WEBPACK_IMPORTED_MODULE_4__.X{constructor(){super(...arguments),this.packageUrlMap={}}get package(){const e={manifest:{name:"bitmap-font",version:"3.1.6",description:"å¿«é€Ÿç”Ÿæˆä½å›¾å­—ä½“çš„æ’ä»¶ï¼Œè¿™å¯èƒ½æ˜¯ä½ è§è¿‡æœ€å¥½ç”¨ï¼Œæœ€å¼ºå¤§çš„ä½å›¾å·¥å…·ï¼",store:"https://store.cocos.com/app/detail/1975",site:["https://tidys.github.io/bmfont-online/","https://tidys.gitee.io/bmfont-online/"],author:"xu_yanfeng",main:"./src/main.ts",panels:[{name:"view",valid:!1,type:"dockable",main:"./src/view/index.ts",title:"bitmap",width:800,height:580,minWidth:800,minHeight:580},{name:"font",type:"dockable",main:"dockable/font_panel.js",title:"bitmap-images",width:800,height:580,minWidth:800,minHeight:580},{name:"ttf",type:"dockable",main:"dockable/ttf_panel.js",title:"bitmap-ttf",width:800,height:580,minWidth:800,minHeight:580}],menus:[{path:"BitMapå­—ä½“å·¥å…·/å­—ä½“å›¾é›†(IMAGE)",message:{name:"openFNT"}},{path:"BitMapå­—ä½“å·¥å…·/å­—ä½“æ–‡ä»¶(TTF)",message:{name:"openTTF"}}],i18n_en:"./src/i18n/en.ts",i18n_zh:"./src/i18n/zh.ts"},options:{server:{enabled:!0,port:2022},watchBuild:!0,cleanBeforeBuildWithPack:!0,outputProject:{web:"./web",v2:" ",v3:""},output:"D:\\project-cocos\\3x\\extensions\\bitmap-font",min:!1},type:"cp-v3"};if(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e}return{}}normalizePath(e){return e.replace(/\\/g,"/")}sceneForcus(e){return __awaiter(this,void 0,void 0,(function*(){this.adaptation.Env.isPluginV3?yield Editor.Message.request("scene","focus-camera",e):this.adaptation.Env.isPluginV2&&Editor.Ipc.sendToPanel("scene","scene:center-nodes",e)}))}getSceneSelectedNode(){return this.adaptation.Env.isPluginV3?Editor.Selection.getSelected("node"):[]}setSceneSelectedNode(e){this.adaptation.Env.isPluginV3&&(Editor.Selection.clear("node"),Editor.Selection.select("node",e))}globArray(e){return __awaiter(this,void 0,void 0,(function*(){let t=[];for(let n of e)t=t.concat(yield this.glob(n));return t}))}glob(rule){return __awaiter(this,void 0,void 0,(function*(){if(this.adaptation.Env.isWeb);else if(this.adaptation.Env.isPlugin)return new Promise(((resolve,reject)=>{const glob=eval(' require("glob")');glob(rule,{absolute:!0,dot:!0},((e,t)=>{e?reject(e):resolve(t)}))}));return[]}))}compressUuid(e){if(this.adaptation.Env.isPluginV2){return Editor.Utils.UuidUtils.compressUuid(e)}return""}decompressUuid(e){if(this.adaptation.Env.isPluginV2){return Editor.Utils.UuidUtils.decompressUuid(e)}if(this.adaptation.Env.isPluginV3){return Editor.Utils.UUID.decompressUUID(e)}return""}fspathToUuid(e){return __awaiter(this,void 0,void 0,(function*(){if(this.adaptation.Env.isPluginV2)return e=(0,path__WEBPACK_IMPORTED_MODULE_1__.normalize)(e),this.adaptation.isProcessRenderer?Editor.assetdb.remote.fspathToUuid(e)||"":Editor.assetdb.fspathToUuid(e)||"";if(this.adaptation.Env.isPluginV3){e=e.replace(/\\/g,"/");const t=this.fspathToUrl(e),n=yield Editor.Message.request("asset-db","query-asset-info",t);if(n)return n.uuid||""}return""}))}uuidToFspath(e){return __awaiter(this,void 0,void 0,(function*(){if(this.adaptation.Env.isPluginV2)return this.adaptation.isProcessRenderer?Editor.assetdb.remote.uuidToFspath(e)||"":Editor.assetdb.uuidToFspath(e)||"";if(this.adaptation.Env.isPluginV3){e=e.split("@")[0];const t=yield Editor.Message.request("asset-db","query-asset-info",e);if(t&&t.file)return t.file}return""}))}fspathToUrl(e){if(e=e.replace(/\\/g,"/"),this.adaptation.Env.isPluginV2)return this.adaptation.isProcessRenderer?Editor.assetdb.remote.fspathToUrl(e)||"":Editor.assetdb.fspathToUrl(e)||"";{const t=this.adaptation.Project.path.replace(/\\/g,"/"),n=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(t,"extensions").replace(/\\/g,"/"),r=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(t,"assets").replace(/\\/g,"/");return e.includes(n)?e.replace(n,"packages:/"):e.includes(r)?e.replace(r,"db://assets/"):null}}urlToUuid(e){return this.adaptation.Env.isPluginV2?this.adaptation.isProcessRenderer?Editor.assetdb.remote.urlToUuid(e)||"":Editor.assetdb.urlToUuid(e)||"":""}init(){let e=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(this.adaptation.Project.path,this.adaptation.Env.pluginDirectory);if(e&&(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(e)){const t=(0,fs__WEBPACK_IMPORTED_MODULE_0__.readdirSync)(e);for(let n=0;n<t.length;n++){const r=t[n],s=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(e,r);if(!(0,fs__WEBPACK_IMPORTED_MODULE_0__.statSync)(s).isDirectory())continue;const i=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(s,"package.json");if((0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(i))try{const e=JSON.parse((0,fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync)(i,"utf-8"));e.name&&this.setPackageUrlRealPath(e.name,s)}catch(e){continue}}}}setPackageUrlRealPath(e,t){this.packageUrlMap[e]=t}getPackageUrlRealPath(e,t,n){let r=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(this.adaptation.Project.path,t,n);if(!r||!(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(r)){if(!e.hostname)return"";if(!e.pathname)return"";const t=this.packageUrlMap[e.hostname];t&&(r=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(t,e.pathname))}return r&&(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(r)||(r=""),r}globalFspath(e){const t=(0,path__WEBPACK_IMPORTED_MODULE_1__.join)((0,os__WEBPACK_IMPORTED_MODULE_3__.homedir)(),".CocosCreator/packages",e);return(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(t)?t:""}urlToFspath(e){let t=(0,url__WEBPACK_IMPORTED_MODULE_2__.parse)(e),n=t.pathname?(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(t.hostname||"",t.pathname):(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(t.hostname||"");if(this.adaptation.Env.isPluginV2){if("packages:"===t.protocol){return this.getPackageUrlRealPath(t,"packages",n)||this.globalFspath(n)}return"db:"===t.protocol||"project:"===t.protocol?(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(this.adaptation.Project.path,n):(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(e)?e:""}if(this.adaptation.Env.isWeb){if("packages:"===t.protocol){const e=this.adaptation.config.manifest.name,t=n.replace(/\\/g,"/").split("/").filter((e=>!!e));t.length&&t[0]===e&&t.shift(),n=t.join("/")}return n}return this.adaptation.Env.isPluginV3?"packages:"===t.protocol?this.getPackageUrlRealPath(t,"extensions",n):"db:"===t.protocol||"project:"===t.protocol?(0,path__WEBPACK_IMPORTED_MODULE_1__.join)(this.adaptation.Project.path,n):(0,fs__WEBPACK_IMPORTED_MODULE_0__.existsSync)(e)?e:"":""}getProperty(e){for(let t=0;t<e.length;t++){const n=e[t];let r=null;if("undefined"!=typeof window)r=window;else{if("undefined"==typeof global)return null;r=global}for(let e=0;e<n.length;e++){const t=n[e];if(!r.hasOwnProperty(t))break;if(r=r[t],e===n.length-1)return r}}return null}}},7615:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(4620),s=n(7886),i=n(7163);const o=new class{constructor(){this.manifest=null,this.options=null,this.Adaptation=new s.e,this.wrapper=null,this.mcp=null}get package(){return this.Adaptation.Util.package}init(e,t){this.manifest=e.manifest,this.options=Object.assign(r.w1,e.options),this.wrapper=t,this.Adaptation.init(e),this.initMcp(t)}initMcp(e){this.mcp=i.c,i.c.getListTools().length&&i.c.connect()}}},7163:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r,s=n(1081),i=n(7615),o=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e.Test="test",e.ListTools="list-tools",e.CmdRun="cmd-run"}(r||(r={}));const a=new class{constructor(){this.port=5395,this.host="127.0.0.1",this.socket=null,this.cmds={}}unload(){this.socket&&(this.socket.onclose=()=>{},this.socket.onopen=()=>{},this.socket.onmessage=()=>{},this.socket.onerror=()=>{},this.disconnect())}disconnect(){this.socket&&(this.socket.close(),this.socket=null)}connect(){this.disconnect(),this.getListTools().forEach((e=>{this.cmds[e.name]=e.callback}));try{this.socket=new s.ZP(`ws://${this.host}:${this.port}`),this.socket.onopen=()=>{const e=this.getListTools();this.send(r.ListTools,e)},this.socket.onclose=e=>{this.socket=null,setTimeout((()=>{this.connect()}),2e3)},this.socket.onerror=e=>{this.socket=null},this.socket.onmessage=e=>{(()=>{o(this,void 0,void 0,(function*(){const t=JSON.parse(e.data.toString()),{cmd:n,data:s}=t;if(r.CmdRun===n){const{tool:e,args:t}=s,r=this.cmds[e];let i="error";r&&(i=yield r(t),this.send(n,i))}}))})()}}catch(e){}}testTools(e,t){return o(this,void 0,void 0,(function*(){const n=this.cmds[e];if(n){return yield n(JSON.parse(t))}return null}))}getListTools(){var e;return((null===(e=i.default.wrapper)||void 0===e?void 0:e.mcp)||[]).filter((e=>!(!1===e.valid)))}test(e){this.send(r.Test,e)}send(e,t){if(this.socket){const n=JSON.stringify({cmd:e,data:t});this.socket.send(n)}}}},4547:(e,t,n)=>{"use strict";n.d(t,{Gd:()=>s});const r="recv_entry";function s(e){return`${e}-${r}`}},4620:(e,t,n)=>{"use strict";n.d(t,{bd:()=>c,s_:()=>r,t4:()=>a,w1:()=>i,zV:()=>s});const r={Type:{DockAble:"dockable",Simple:"simple",Floating:"floating",InnerIndex:"inner-index",Web:"web"}};var s;!function(e){e.PluginV2="cp-v2",e.PluginV3="cp-v3",e.Web="web",e.Chrome="chrome",e.Electron="electron"}(s||(s={}));const i={outputProject:"./",output:"./dist",server:{enabled:!1,port:2022},watchBuild:!1,min:!1};var o,a,c;!function(e){e.V3_Bytedance="bytedance-mini-game",e.V3_Webmobile="web-mobile"}(o||(o={})),function(e){e.Unknown="unknown",e.WebMobile="web-mobile",e.WebDesktop="web-desktop",e.Android="android",e.Ios="ios",e.Mac="mac",e.Win32="win32"}(a||(a={})),function(e){e.EditorNodeModules="editor-node-modules"}(c||(c={}))},977:(e,t,n)=>{"use strict";const{EMPTY_BUFFER:r}=n(1872),s=Buffer[Symbol.species];function i(e,t,n,r,s){for(let i=0;i<s;i++)n[r+i]=e[i]^t[3&i]}function o(e,t){for(let n=0;n<e.length;n++)e[n]^=t[3&n]}if(e.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];n.set(r,i),i+=r.length}return i<t?new s(n.buffer,n.byteOffset,i):n},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let n;return t instanceof ArrayBuffer?n=new s(t):ArrayBuffer.isView(t)?n=new s(t.buffer,t.byteOffset,t.byteLength):(n=Buffer.from(t),e.readOnly=!1),n},unmask:o},!{}.WS_NO_BUFFER_UTIL)try{const t=n(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,n,r,s,o){o<48?i(e,n,r,s,o):t.mask(e,n,r,s,o)},e.exports.unmask=function(e,n){e.length<32?o(e,n):t.unmask(e,n)}}catch(e){}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},62:(e,t,n)=>{"use strict";const{kForOnEventAttribute:r,kListener:s}=n(1872),i=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),u=Symbol("kReason"),l=Symbol("kTarget"),h=Symbol("kType"),d=Symbol("kWasClean");class f{constructor(e){this[l]=null,this[h]=e}get target(){return this[l]}get type(){return this[h]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[u]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[u]}get wasClean(){return this[d]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class _ extends f{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(_.prototype,"error",{enumerable:!0}),Object.defineProperty(_.prototype,"message",{enumerable:!0});class m extends f{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,n={}){for(const i of this.listeners(e))if(!n[r]&&i[s]===t&&!i[r])return;let i;if("message"===e)i=function(e,n){const r=new m("message",{data:n?e:e.toString()});r[l]=this,v(t,this,r)};else if("close"===e)i=function(e,n){const r=new p("close",{code:e,reason:n.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[l]=this,v(t,this,r)};else if("error"===e)i=function(e){const n=new _("error",{error:e,message:e.message});n[l]=this,v(t,this,n)};else{if("open"!==e)return;i=function(){const e=new f("open");e[l]=this,v(t,this,e)}}i[r]=!!n[r],i[s]=t,n.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const n of this.listeners(e))if(n[s]===t&&!n[r]){this.removeListener(e,n);break}}};function v(e,t,n){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,n):e.call(t,n)}e.exports={CloseEvent:p,ErrorEvent:_,Event:f,EventTarget:g,MessageEvent:m}},1503:(e,t,n)=>{"use strict";const{tokenChars:r}=n(6746);function s(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map((t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>[t].concat(Object.keys(e).map((t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let n,i,o=Object.create(null),a=!1,c=!1,u=!1,l=-1,h=-1,d=-1,f=0;for(;f<e.length;f++)if(h=e.charCodeAt(f),void 0===n)if(-1===d&&1===r[h])-1===l&&(l=f);else if(0===f||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);const r=e.slice(l,d);44===h?(s(t,r,o),o=Object.create(null)):n=r,l=d=-1}}else-1===d&&-1!==l&&(d=f);else if(void 0===i)if(-1===d&&1===r[h])-1===l&&(l=f);else if(32===h||9===h)-1===d&&-1!==l&&(d=f);else if(59===h||44===h){if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),s(o,e.slice(l,d),!0),44===h&&(s(t,n,o),o=Object.create(null),n=void 0),l=d=-1}else{if(61!==h||-1===l||-1!==d)throw new SyntaxError(`Unexpected character at index ${f}`);i=e.slice(l,f),l=d=-1}else if(c){if(1!==r[h])throw new SyntaxError(`Unexpected character at index ${f}`);-1===l?l=f:a||(a=!0),c=!1}else if(u)if(1===r[h])-1===l&&(l=f);else if(34===h&&-1!==l)u=!1,d=f;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===h&&61===e.charCodeAt(f-1))u=!0;else if(-1===d&&1===r[h])-1===l&&(l=f);else if(-1===l||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let r=e.slice(l,d);a&&(r=r.replace(/\\/g,""),a=!1),s(o,i,r),44===h&&(s(t,n,o),o=Object.create(null),n=void 0),i=void 0,l=d=-1}}else-1===d&&(d=f);if(-1===l||u||32===h||9===h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=f);const p=e.slice(l,d);return void 0===n?s(t,p,o):(void 0===i?s(o,p,!0):s(o,i,a?p.replace(/\\/g,""):p),s(t,n,o)),t}}},305:e=>{"use strict";const t=Symbol("kDone"),n=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[n]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,n)=>{"use strict";const r=n(9796),s=n(977),i=n(305),{kStatusCode:o}=n(1872),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),l=Symbol("total-length"),h=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error");let p;function _(e){this[d].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[u]._maxPayload<1||this[l]<=this[u]._maxPayload?this[d].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][o]=1009,this.removeListener("data",m),this.reset())}function g(e){this[u]._inflate=null,e[o]=1007,this[h](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n}))})),e}decompress(e,t,n){p.add((r=>{this._decompress(e,t,((e,t)=>{r(),n(e,t)}))}))}compress(e,t,n){p.add((r=>{this._compress(e,t,((e,t)=>{r(),n(e,t)}))}))}_decompress(e,t,n){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=r.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[l]=0,this._inflate[d]=[],this._inflate.on("error",g),this._inflate.on("data",m)}this._inflate[h]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void n(e);const r=s.concat(this._inflate[d],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,r)}))}_compress(e,t,n){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?r.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=r.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[d]=[],this._deflate.on("data",_)}this._deflate[h]=n,this._deflate.write(e),this._deflate.flush(r.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=s.concat(this._deflate[d],this._deflate[l]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[l]=0,this._deflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,e)}))}}},2957:(e,t,n)=>{"use strict";const{Writable:r}=n(2781),s=n(5196),{BINARY_TYPES:i,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=n(1872),{concat:u,toArrayBuffer:l,unmask:h}=n(977),{isValidStatusCode:d,isValidUTF8:f}=n(6746),p=Buffer[Symbol.species],_=Promise.resolve(),m="function"==typeof queueMicrotask?queueMicrotask:function(e){_.then(e).catch(y)};function g(e,t,n,r,s){const i=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,g),i.code=s,i[a]=r,i}function v(e){throw e}function y(e){process.nextTick(v,e)}e.exports=class extends r{constructor(e={}){super(),this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e),new p(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],r=t.length-e;e>=n.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),r),this._buffers[0]=new p(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;case 5:return void(this._loop=!1);default:return this._loop=!1,void m((()=>{this._state=0,this.startLoop(e)}))}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,g(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[s.extensionName])return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,g(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,g(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,g(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,g(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return this._loop=!1,g(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,g(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,g(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,g(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,g(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&h(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[s.extensionName].decompress(e,this._fin,((e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(g(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(n)}const r=this.dataMessage();if(r)return t(r);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?u(t,e):"arraybuffer"===this._binaryType?l(u(t,e)):t,this.emit("message",n,!0)}else{const n=u(t,e);if(!this._skipUTF8Validation&&!f(n))return this._loop=!1,g(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=6}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,o),this.end(),this._state=0;else{const t=e.readUInt16BE(0);if(!d(t))return g(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const n=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(n))return g(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,n),this.end(),this._state=0}else 9===this._opcode?(this.emit("ping",e),this._state=6):(this.emit("pong",e),this._state=6)}}},7330:(e,t,n)=>{"use strict";const{Duplex:r}=n(2781),{randomFillSync:s}=n(6113),i=n(5196),{EMPTY_BUFFER:o}=n(1872),{isValidStatusCode:a}=n(6746),{mask:c,toBuffer:u}=n(977),l=Symbol("kByteLength"),h=Buffer.alloc(4);class d{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let n,r,i=!1,o=2,a=!1;t.mask&&(n=t.maskBuffer||h,t.generateMask?t.generateMask(n):s(n,0,4),a=0==(n[0]|n[1]|n[2]|n[3]),o=6),"string"==typeof e?r=t.mask&&!a||void 0===t[l]?(e=Buffer.from(e)).length:t[l]:(r=e.length,i=t.mask&&t.readOnly&&!a);let u=r;r>=65536?(o+=8,u=127):r>125&&(o+=2,u=126);const d=Buffer.allocUnsafe(i?r+o:o);return d[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(d[0]|=64),d[1]=u,126===u?d.writeUInt16BE(r,2):127===u&&(d[2]=d[3]=0,d.writeUIntBE(r,4,6)),t.mask?(d[1]|=128,d[o-4]=n[0],d[o-3]=n[1],d[o-2]=n[2],d[o-1]=n[3],a?[d,e]:i?(c(e,n,d,o,r),[d]):(c(e,n,e,0,r),[d,e])):[d,e]}close(e,t,n,r){let s;if(void 0===e)s=o;else{if("number"!=typeof e||!a(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+n),s.writeUInt16BE(e,0),"string"==typeof t?s.write(t,2):s.set(t,2)}else s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0)}const i={[l]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,i,r]):this.sendFrame(d.frame(s,i),r)}ping(e,t,n){let r,s;if("string"==typeof e?(r=Buffer.byteLength(e),s=!1):(r=(e=u(e)).length,s=u.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[l]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,n]):this.sendFrame(d.frame(e,i),n)}pong(e,t,n){let r,s;if("string"==typeof e?(r=Buffer.byteLength(e),s=!1):(r=(e=u(e)).length,s=u.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[l]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,i,n]):this.sendFrame(d.frame(e,i),n)}send(e,t,n){const r=this._extensions[i.extensionName];let s,o,a=t.binary?2:1,c=t.compress;if("string"==typeof e?(s=Buffer.byteLength(e),o=!1):(s=(e=u(e)).length,o=u.readOnly),this._firstFragment?(this._firstFragment=!1,c&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=s>=r._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0),r){const r={[l]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:o,rsv1:c};this._deflating?this.enqueue([this.dispatch,e,this._compress,r,n]):this.dispatch(e,this._compress,r,n)}else this.sendFrame(d.frame(e,{[l]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:o,rsv1:!1}),n)}dispatch(e,t,n,r){if(!t)return void this.sendFrame(d.frame(e,n),r);const s=this._extensions[i.extensionName];this._bufferedBytes+=n[l],this._deflating=!0,s.compress(e,n.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof r&&r(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t],r=n[n.length-1];"function"==typeof r&&r(e)}}else this._bufferedBytes-=n[l],this._deflating=!1,n.readOnly=!1,this.sendFrame(d.frame(t,n),r),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][l],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][l],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},404:(e,t,n)=>{"use strict";const{Duplex:r}=n(2781);function s(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;const a=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,n){const r=!n&&a._readableState.objectMode?t.toString():t;a.push(r)||e.pause()})),e.once("error",(function(e){a.destroyed||(n=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(s,a);let i=!1;e.once("error",(function(e){i=!0,r(e)})),e.once("close",(function(){i||r(t),process.nextTick(s,a)})),n&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,n,r){e.readyState!==e.CONNECTING?e.send(t,r):e.once("open",(function(){a._write(t,n,r)}))},a.on("end",i),a.on("error",o),a}},640:(e,t,n)=>{"use strict";const{tokenChars:r}=n(6746);e.exports={parse:function(e){const t=new Set;let n=-1,s=-1,i=0;for(;i<e.length;i++){const o=e.charCodeAt(i);if(-1===s&&1===r[o])-1===n&&(n=i);else if(0===i||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===n)throw new SyntaxError(`Unexpected character at index ${i}`);-1===s&&(s=i);const r=e.slice(n,s);if(t.has(r))throw new SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),n=s=-1}}else-1===s&&-1!==n&&(s=i)}if(-1===n||-1!==s)throw new SyntaxError("Unexpected end of input");const o=e.slice(n,i);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},6746:(e,t,n)=>{"use strict";const{isUtf8:r}=n(4300);function s(e){const t=e.length;let n=0;for(;n<t;)if(0==(128&e[n]))n++;else if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:s,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)e.exports.isValidUTF8=function(e){return e.length<24?s(e):r(e)};else if(!{}.WS_NO_UTF_8_VALIDATE)try{const t=n(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?s(e):t(e)}}catch(e){}},9284:(e,t,n)=>{"use strict";const r=n(2361),s=n(3685),{Duplex:i}=n(2781),{createHash:o}=n(6113),a=n(1503),c=n(5196),u=n(640),l=n(8762),{GUID:h,kWebSocket:d}=n(1872),f=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function _(){this.destroy()}function m(e,t,n,r){n=n||s.STATUS_CODES[t],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...r},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${s.STATUS_CODES[t]}\r\n`+Object.keys(r).map((e=>`${e}: ${r[e]}`)).join("\r\n")+"\r\n\r\n"+n)}function g(e,t,n,r,s){if(e.listenerCount("wsClientError")){const r=new Error(s);Error.captureStackTrace(r,g),e.emit("wsClientError",r,n,t)}else m(n,r,s)}e.exports=class extends r{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:l,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=s.createServer(((e,t)=>{const n=s.STATUS_CODES[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,r)=>{this.handleUpgrade(t,n,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{p(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",_);const s=e.headers["sec-websocket-key"],i=+e.headers["sec-websocket-version"];if("GET"!==e.method){return void g(this,e,t,405,"Invalid HTTP method")}if("websocket"!==e.headers.upgrade.toLowerCase()){return void g(this,e,t,400,"Invalid Upgrade header")}if(!s||!f.test(s)){return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header")}if(8!==i&&13!==i){return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header")}if(!this.shouldHandle(e))return void m(t,400);const o=e.headers["sec-websocket-protocol"];let l=new Set;if(void 0!==o)try{l=u.parse(o)}catch(n){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&void 0!==h){const n=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(h);e[c.extensionName]&&(n.accept(e[c.extensionName]),d[c.extensionName]=n)}catch(n){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[""+(8===i?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,((i,o,a,c)=>{if(!i)return m(t,o||401,a,c);this.completeUpgrade(d,s,l,e,t,n,r)}));if(!this.options.verifyClient(o))return m(t,401)}this.completeUpgrade(d,s,l,e,t,n,r)}completeUpgrade(e,t,n,r,s,i,u){if(!s.readable||!s.writable)return s.destroy();if(s[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(s,503);const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+h).digest("base64")}`],f=new this.options.WebSocket(null);if(n.size){const e=this.options.handleProtocols?this.options.handleProtocols(n,r):n.values().next().value;e&&(l.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,n=a.format({[c.extensionName]:[t]});l.push(`Sec-WebSocket-Extensions: ${n}`),f._extensions=e}this.emit("headers",l,r),s.write(l.concat("\r\n").join("\r\n")),s.removeListener("error",_),f.setSocket(s,i,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",(()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)}))),u(f,r)}}},8762:(e,t,n)=>{"use strict";const r=n(2361),s=n(5687),i=n(3685),o=n(1808),a=n(4404),{randomBytes:c,createHash:u}=n(6113),{Duplex:l,Readable:h}=n(2781),{URL:d}=n(7310),f=n(5196),p=n(2957),_=n(7330),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:v,kForOnEventAttribute:y,kListener:b,kStatusCode:E,kWebSocket:w,NOOP:k}=n(1872),{EventTarget:{addEventListener:P,removeEventListener:x}}=n(62),{format:S,parse:O}=n(1503),{toBuffer:T}=n(977),C=Symbol("kAborted"),M=[8,13],D=["CONNECTING","OPEN","CLOSING","CLOSED"],R=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class L extends r{constructor(e,t,n){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=L.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(n=t,t=[]):t=[t]),U(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const r=new p({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new _(e,this._extensions,n.generateMask),this._receiver=r,this._socket=e,r[w]=this,e[w]=this,r.on("conclude",W),r.on("drain",V),r.on("error",q),r.on("message",F),r.on("ping",K),r.on("pong",z),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",X),e.on("end",Y),e.on("error",J),this._readyState=L.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=L.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=L.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==L.CLOSED)if(this.readyState!==L.CONNECTING)this.readyState!==L.CLOSING?(this._readyState=L.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";N(this,this._req,e)}}pause(){this.readyState!==L.CONNECTING&&this.readyState!==L.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===L.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,n)):j(this,e,n)}pong(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===L.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,n)):j(this,e,n)}resume(){this.readyState!==L.CONNECTING&&this.readyState!==L.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==L.OPEN)return void j(this,e,n);const r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(r.compress=!1),this._sender.send(e||g,r,n)}terminate(){if(this.readyState!==L.CLOSED)if(this.readyState!==L.CONNECTING)this._socket&&(this._readyState=L.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";N(this,this._req,e)}}}function U(e,t,n,r){const o={protocolVersion:M[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!M.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${M.join(", ")})`);let a;if(t instanceof d)a=t;else try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const l="wss:"===a.protocol,h="ws+unix:"===a.protocol;let p;if("ws:"===a.protocol||l||h?h&&!a.pathname?p="The URL's pathname is empty":a.hash&&(p="The URL contains a fragment identifier"):p='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',p){const t=new SyntaxError(p);if(0===e._redirects)throw t;return void B(e,t)}const _=l?443:80,m=c(16).toString("base64"),g=l?s.request:i.request,y=new Set;let b,E;if(o.createConnection=l?I:A,o.defaultPort=o.defaultPort||_,o.port=a.port||_,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(b=new f(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=S({[f.extensionName]:b.offer()})),n.length){for(const e of n){if("string"!=typeof e||!R.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}o.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),h){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalIpc=h,e._originalSecure=l,e._originalHostOrSocketPath=h?o.socketPath:a.host;const t=r&&r.headers;if(r={...r,headers:{}},t)for(const[e,n]of Object.entries(t))r.headers[e.toLowerCase()]=n}else if(0===e.listenerCount("redirect")){const t=h?!!e._originalIpc&&o.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!l)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),E=e._req=g(o),e._redirects&&e.emit("redirect",e.url,E)}else E=e._req=g(o);o.timeout&&E.on("timeout",(()=>{N(e,E,"Opening handshake has timed out")})),E.on("error",(t=>{null===E||E[C]||(E=e._req=null,B(e,t))})),E.on("response",(s=>{const i=s.headers.location,a=s.statusCode;if(i&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void N(e,E,"Maximum redirects exceeded");let s;E.abort();try{s=new d(i,t)}catch(t){const n=new SyntaxError(`Invalid URL: ${i}`);return void B(e,n)}U(e,s,n,r)}else e.emit("unexpected-response",E,s)||N(e,E,`Unexpected server response: ${s.statusCode}`)})),E.on("upgrade",((t,n,r)=>{if(e.emit("upgrade",t),e.readyState!==L.CONNECTING)return;if(E=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void N(e,n,"Invalid Upgrade header");const s=u("sha1").update(m+v).digest("base64");if(t.headers["sec-websocket-accept"]!==s)return void N(e,n,"Invalid Sec-WebSocket-Accept header");const i=t.headers["sec-websocket-protocol"];let a;if(void 0!==i?y.size?y.has(i)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":y.size&&(a="Server sent no subprotocol"),a)return void N(e,n,a);i&&(e._protocol=i);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!b){return void N(e,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=O(c)}catch(t){return void N(e,n,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(1!==r.length||r[0]!==f.extensionName){return void N(e,n,"Server indicated an extension that was not requested")}try{b.accept(t[f.extensionName])}catch(t){return void N(e,n,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=b}e.setSocket(n,r,{generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})})),o.finishRequest?o.finishRequest(E,e):E.end()}function B(e,t){e._readyState=L.CLOSING,e.emit("error",t),e.emitClose()}function A(e){return e.path=e.socketPath,o.connect(e)}function I(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function N(e,t,n){e._readyState=L.CLOSING;const r=new Error(n);Error.captureStackTrace(r,N),t.setHeader?(t[C]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(B,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function j(e,t,n){if(t){const n=T(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${D[e.readyState]})`);process.nextTick(n,t)}}function W(e,t){const n=this[w];n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,void 0!==n._socket[w]&&(n._socket.removeListener("data",X),process.nextTick(H,n._socket),1005===e?n.close():n.close(e,t))}function V(){const e=this[w];e.isPaused||e._socket.resume()}function q(e){const t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",X),process.nextTick(H,t._socket),t.close(e[E])),t.emit("error",e)}function $(){this[w].emitClose()}function F(e,t){this[w].emit("message",e,t)}function K(e){const t=this[w];t.pong(e,!t._isServer,k),t.emit("ping",e)}function z(e){this[w].emit("pong",e)}function H(e){e.resume()}function G(){const e=this[w];let t;this.removeListener("close",G),this.removeListener("data",X),this.removeListener("end",Y),e._readyState=L.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",$),e._receiver.on("finish",$))}function X(e){this[w]._receiver.write(e)||this.pause()}function Y(){const e=this[w];e._readyState=L.CLOSING,e._receiver.end(),this.end()}function J(){const e=this[w];this.removeListener("error",J),this.on("error",k),e&&(e._readyState=L.CLOSING,this.destroy())}Object.defineProperty(L,"CONNECTING",{enumerable:!0,value:D.indexOf("CONNECTING")}),Object.defineProperty(L.prototype,"CONNECTING",{enumerable:!0,value:D.indexOf("CONNECTING")}),Object.defineProperty(L,"OPEN",{enumerable:!0,value:D.indexOf("OPEN")}),Object.defineProperty(L.prototype,"OPEN",{enumerable:!0,value:D.indexOf("OPEN")}),Object.defineProperty(L,"CLOSING",{enumerable:!0,value:D.indexOf("CLOSING")}),Object.defineProperty(L.prototype,"CLOSING",{enumerable:!0,value:D.indexOf("CLOSING")}),Object.defineProperty(L,"CLOSED",{enumerable:!0,value:D.indexOf("CLOSED")}),Object.defineProperty(L.prototype,"CLOSED",{enumerable:!0,value:D.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(L.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(L.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[y])return t[b];return null},set(t){for(const t of this.listeners(e))if(t[y]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[y]:!0})}})})),L.prototype.addEventListener=P,L.prototype.removeEventListener=x,e.exports=L},9496:e=>{"use strict";e.exports=require("electron")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1081:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s});n(404),n(2957),n(7330);var r=n(8762);n(9284);const s=r}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(4620);const t={manifest:{name:"bitmap-font",version:"3.1.6",description:"å¿«é€Ÿç”Ÿæˆä½å›¾å­—ä½“çš„æ’ä»¶ï¼Œè¿™å¯èƒ½æ˜¯ä½ è§è¿‡æœ€å¥½ç”¨ï¼Œæœ€å¼ºå¤§çš„ä½å›¾å·¥å…·ï¼",store:"https://store.cocos.com/app/detail/1975",site:["https://tidys.github.io/bmfont-online/","https://tidys.gitee.io/bmfont-online/"],author:"xu_yanfeng",main:"./src/main.ts",panels:[{name:"view",valid:!1,type:e.s_.Type.DockAble,main:"./src/view/index.ts",title:"bitmap",width:800,height:580,minWidth:800,minHeight:580},{name:"font",type:e.s_.Type.DockAble,main:"./src/panel/index.ts",title:"bitmap-images",width:800,height:580,minWidth:800,minHeight:580},{name:"ttf",type:e.s_.Type.DockAble,main:"./src/panel-ttf/index.ts",title:"bitmap-ttf",width:800,height:580,minWidth:800,minHeight:580}],menus:[{path:"BitMapå­—ä½“å·¥å…·/å­—ä½“å›¾é›†(IMAGE)",message:{name:"openFNT"}},{path:"BitMapå­—ä½“å·¥å…·/å­—ä½“æ–‡ä»¶(TTF)",message:{name:"openTTF"}}],i18n_en:"./src/i18n/en.ts",i18n_zh:"./src/i18n/zh.ts"},options:{server:{enabled:!1,port:2022},watchBuild:!1,cleanBeforeBuildWithPack:!0,outputProject:{web:"./web",v2:"",v3:""}}};var n=__webpack_require__(7615);n.default.init(t,{load:()=>{},builder:{onAfterBuild(e){}},messages:{openTTF(){n.default.Adaptation.Panel.open("self.ttf")},openFNT(){n.default.Adaptation.Panel.open("self.font")}}})})(),(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{load:()=>l,methods:()=>d,unload:()=>h});var e=__webpack_require__(7615);class t{}class n{constructor(){this.isConn=!1,this.reloadCallback=null;const e=new t;e.setTimeout(1e3,(()=>{})),e.on("data",(e=>{const t=e.toString();this.onMessage(t)})),e.on("close",(()=>{this.isConn=!1})),e.on("error",(e=>{this.isConn=!1})),this.client=e}setReloadCallback(e){this.reloadCallback=e}onMessage(e){var t;"reload"===e&&(null===(t=this.client)||void 0===t||t.end((()=>{this.reloadCallback&&this.reloadCallback()})))}connect(e){var t;const{client:n}=this;null===(t=this.client)||void 0===t||t.connect(e,"127.0.0.1",(()=>{this.isConn=!0,this.send("hi server")}))}send(e){this.client&&this.isConn&&this.client.write(e)}}var r=__webpack_require__(1017),s=__webpack_require__(7163),i=__webpack_require__(4620);const{ipcMain:o}=__webpack_require__(9496);function a(t,n){t.returnValue=e.default.Adaptation.CCEditor.node_modules}var c;const{ipcMain:u}=__webpack_require__(9496);function l(){var t;if(o.on(i.bd.EditorNodeModules,a),e.default.options&&e.default.options.server){const{enabled:t,port:r,creatorHMR:s}=e.default.options.server;if(t&&s){const t=new n;t.setReloadCallback((()=>{e.default.Adaptation.Util.urlToFspath(`packages://${e.default.manifest.name}`)})),t.connect(r)}}null===(t=e.default.wrapper)||void 0===t||t.load()}function h(){o.off(i.bd.EditorNodeModules,a),s.c.unload(),e.default.wrapper&&e.default.wrapper.unload&&e.default.wrapper.unload()}const d=Object.assign((null===(c=e.default.wrapper)||void 0===c?void 0:c.messages)||{},{onBuilder(t){var n,s,i,o;const{buildPath:a,name:c,outputName:u,platform:l,md5Cache:h}=t.data,d=e.default.Adaptation.Util.urlToFspath(a),f={buildPath:d,outputPath:r.join(d,u),platform:l,md5Cache:h};"onAfterBuild"===t.type?e.default&&e.default.wrapper&&e.default.wrapper.builder&&e.default.wrapper.builder.onAfterBuild&&(null===(s=null===(n=e.default.wrapper)||void 0===n?void 0:n.builder)||void 0===s||s.onAfterBuild(f)):"onBeforeBuild"===t.type&&e.default&&e.default.wrapper&&e.default.wrapper.builder&&e.default.wrapper.builder.onBeforeBuild&&(null===(o=null===(i=e.default.wrapper)||void 0===i?void 0:i.builder)||void 0===o||o.onBeforeBuild(f))}})})();var __webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();